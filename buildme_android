#!/bin/bash

CMAKE_BUILD_TYPE=Release
CMAKE_TOOLCHAIN_FILE=~/Desktop/Android/Sdk/ndk/23.0.7123448/build/cmake/android.toolchain.cmake

ANDROID_ABI=armeabi-v7a
ANDROID_TOOLCHAIN=clang
ANDROID_ARM_NEON=ON
ANDROID_NATIVE_API_LEVEL=24

DESTDIR=../build

mkdir -p temp
pushd temp
cmake -v -DCMAKE_BUILD_TYPE=$CMAKE_BUILD_TYPE \
-DCMAKE_TOOLCHAIN_FILE=$CMAKE_TOOLCHAIN_FILE \
-DANDROID_ABI=$ANDROID_ABI \
-DANDROID_TOOLCHAIN=$ANDROID_TOOLCHAIN \
-DANDROID_ARM_NEON=$ANDROID_ARM_NEON \
-DANDROID_NATIVE_API_LEVEL=$ANDROID_NATIVE_API_LEVEL \
../

make -j `nproc`
make -j `nproc` install DESTDIR=$DESTDIR

popd
